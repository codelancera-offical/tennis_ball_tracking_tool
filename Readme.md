# 视频弹跳事件自动检测工具 v3.0

一个命令行工具，用于从视频追踪数据中自动检测物体弹跳事件。

## 主要功能

  * **交互式界面**：无需输入复杂的命令行参数，通过菜单引导即可完成操作。
  * **两种处理模式**：支持处理单个视频/CSV文件对，或批量处理包含多个数据对的文件夹。
  * **模块化设计**：支持在运行时动态选择不同的检测算法。
  * **灵活输出**：可选择仅生成数据结果（CSV），或同时生成带分析图表的可视化视频（MP4）。

## 环境要求

  * Python 3.6+
  * 所有依赖库均在 `requirements.txt` 中列出。

## 快速开始

1.  **安装依赖**：
    在您的终端中，进入项目根目录，然后运行以下命令：

    ```bash
    pip install -r requirements.txt
    ```

2.  **运行程序**：
    使用以下命令启动交互式程序：

    ```bash
    python run.py
    ```

    程序启动后，根据屏幕上的菜单提示进行操作即可：

      * 选择 `[1] 单文件模式` 或 `[2] 批量模式`。
      * 选择要使用的检测算法（当前为 `signal_processing`）。
      * 确认是否需要生成可视化视频。
      * 根据提示输入相应的文件或文件夹路径。

## 批量处理文件夹结构要求

当您选择**批量处理模式**时，请确保您的文件夹结构符合以下格式。程序会遍历根目录下的**第一层子文件夹**（如 `1`, `2`）。

每个子文件夹内必须**有且仅有**一个视频文件和一个原始坐标数据CSV文件。

**示例结构:**

```
batch_data/
├── 1/
│   ├── benchmark_01_coordinates.csv
│   └── benchmark_01_tracked.mp4
├── 2/
│   ├── another_video.mp4
│   └── its_data.csv
└── ...
```

## 输出说明

程序处理完成后，会在原始CSV文件所在的目录生成以下文件：

  * `*_bounces.csv`：在原始数据基础上新增了 `is_bounce` 列，`1` 表示该帧被检测为弹跳。
  * `*_output.mp4`：（可选）带有详细分析图表的可视化视频。

![output_video_example](output_video_example.gif)
